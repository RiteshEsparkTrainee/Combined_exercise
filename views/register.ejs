<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register User</title>
    <style>
        body
        {         
           
            background-image: url("/register_bg2.png");
            background-size: cover;


        }
        .container
        {
            margin: 0 auto;
            max-width: 1080px;        
         
        }
        h2{
            text-align: center;
            color: white;
        }
        form
        {
            width : 550px;
            margin: 0 auto;
            justify-content: center;
        }
        .myform
        {
            float:right;
            
        }
        table
        {
            width: 480px;
            height: 400px;
            margin: 0 auto;
            background-color:antiquewhite;
            border: 2px solid black;
            border-radius: 5px;
         
            
        }
        #submitbtn
        {
            height: 40px;
            margin-left: 60px;
            margin-top: 20px;
            font-size: 20px;
            background-color: green;
            border: 1px solid black;
            border-radius: 5px;
            align-items: center;
            text-align: center;
            color: white;
        }
      
        .error
        {
            color: red;
            font-size: 14px;
        }
        .register_image
        {
            float: left;
            border-radius: 18px;
            height: 400px;
            border-radius: 20px;
        }
        input{
            margin-top: 4px;
            padding: 10px;
            width : 450px;
            height : 25px;
            border : 1px solid black;
            border-radius: 5px;
        }
         label
        {
            font-weight: bold;
            padding-left: 2px;
        
        }
        .heading
        {
            color:white;
            font-weight: bold;
        }

        .already_account
        {
            margin-left: 40px;
            padding: 5px;  
            color: white;          
        }
        .already_account > span
        {
          
            padding: 5px;            
        } 
        .forgetPassword
        {
            margin-left: 45px;
            color: white;
            
        }
        a
        {
            color: aliceblue;
        }
        .forgetPassword > span
        {
            padding: 5px;  
            
        }
        #showPassword1
        {
            width : 35px;
            margin-top: 18px;
         
           
        }
        #hidePassword1
        {
            width : 30px;
            margin-top: 18px;
        }
        #showPassword2
        {
            width : 35px;
            margin-top: 18px;
        }
        #hidePassword2
        {
            width : 30px;
            margin-top: 18px;
        }
    </style>
</head>
<body>
    <div class="container">
      
        <h2>Jaiswal Ritesh : 24DEV068</h2>
        <h2 class="heading">Register User</h2>
        <div class="register_image">
            <img src="/welcome.png" height="400px" width="400px">
        </div>
        
        <div class="myform">
            <% if(message !== false) {%>
               <span class="error" style="margin-left:220px ;"><%= message  %></span> 
                <% } %>
        <form action="/dashboard/save"
        method="post" autocomplete="on" id="Form1" onsubmit="return validateForm()">
        <table>
            <tr>
                <td>
                    
                    <label for="firstname"> First name </label><br>
                    <input type="text" id="firstname" name="fname" placeholder="Ritesh" class="required" value="<%= data[0].firstname  %>"
                        tabindex="1"><br>
                    <span class="error" id="error-firstname"></span>
                </td>
                </tr>
                <tr>
                <td>
                    <label for="lastname"> Last name </label><br>
                    <input type="text" id="lastname" name="lname" placeholder="Jaiswal" class="required" value="<%= data[0].lastname  %>"
                        tabindex="2"><br>
                    <span class="error" id="error-lastname"></span>

                </td>
            </tr>
            <tr>
                <td>
                    <label for="email"> Email </label><br>
                    <input type="text" id="email" name="email"  placeholder="riteshjaiswala@gmail.com" value="<%= data[0].email  %>"
                        class="required" tabindex="3"><br>
                    <span class="error" id="error-email"></span>
                </td>
                </tr>
                <tr>
                    <td>
                        <label for="phone"> Phone Number </label><br>
                        <input type="text" id="phone" name="phone" placeholder="7573060549" tabindex="7"  value="<%= data[0].phone  %>"
                            class="required"><br>
                        <span class="error" id="error-phone"></span>
                    </td>
                    </tr>
                    <tr>
                    <td>
                        <label for="city"> City </label><br>
                        <input type="text" id="city" name="city" placeholder="Ahmedabad" class="required" value="<%= data[0].city  %>"
                            tabindex="8"><br>
                        <span class="error" id="error-city"></span>
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="password">Password</label><br>
                        <input type="text" id ="password1" name="password1" class="required"><br>
                        <span class="error" id="error-password1"></span>
                        <td>
                            <img src="/hide_pass.png" id="showPassword1" onclick="showPass()">
                            <img src="/show_password.jpeg" hidden id="hidePassword1" onclick="hidePass()">
                        </td>
                        
                      <br>

                   
                    </td>                    
                </tr>
                
                <tr>
                    <td>
                        <label for="password2">Re-Enter Your Password</label><br>
                        <input type="text" name="password2" id="password2" class="required"><br>
                        <span class="error" id="error-password2"></span>
                    </td>
                    <td>
                        <img src="/hide_pass.png" id="showPassword2" onclick="showPass2()">
                        <img src="/show_password.jpeg" hidden id="hidePassword2" onclick="hidePass2()">
                        
                    </td>
                </tr>
              
        </table>
        <div class="already_account">
            <span >Already have an account?</span><a href="/dashboard/login">sign-in</a>
            
        </div>
        <div class="forgetPassword">
            <span id="forget_password">Forget Password?</span>
           
        </div>
        
        <input type="submit" value="Register" id="submitbtn">
    
        </form>
        </div>
        <script>
        var password= document.getElementById('password1')
        if(password.type=== "text")
        {
            password.type = "password"
        }

        function showPass()
        {
            document.getElementById('showPassword1').style.display='none'
            document.getElementById('hidePassword1').style.display='block'
            if(password.type=== "password")
            {
                password.type = "text"
            }

        }
        function hidePass()
        {
            document.getElementById('showPassword1').style.display='block'
            document.getElementById('hidePassword1').style.display='none'
            if(password.type=== "text")
            {
                password.type = "password"
            }
        }
        var password2= document.getElementById('password2')
        if(password2.type=== "text")
        {
            password2.type = "password"
        }

        function showPass2()
        {
            document.getElementById('showPassword2').style.display='none'
            document.getElementById('hidePassword2').style.display='block'
            if(password2.type=== "password")
            {
                password2.type = "text"
            }

        }
        function hidePass2()
        {
            document.getElementById('showPassword2').style.display='block'
            document.getElementById('hidePassword2').style.display='none'
            if(password2.type=== "text")
            {
                password2.type = "password"
            }
        }
            
            function validateForm(){
           
                
              let eleList = document.querySelectorAll('.required')
              console.log(eleList)

              let errors = document.querySelectorAll('.error')

                for (let err of errors) {
                    err.innerHTML = ""
                }                 


              let error_show = false;
                for (let i = 0; i < eleList.length; i++) {
                    if (eleList[i].value === "" ||  eleList[i].value.trim().length===0) {
                        console.log('error', eleList[i].id)
                        document.getElementById('error-' + eleList[i].id).innerHTML = eleList[i].id + " can't be none"
                        error_show=true;
                    }

                }
                if(error_show)
                {
                    return false;
                }
                let email = document.forms["Form1"]["email"].value;
                let phone = document.forms["Form1"]["phone"].value;
                let password1= document.forms["Form1"]["password1"].value
                let password2= document.forms["Form1"]["password2"].value


                if (!validateName("fname")) {
                document.getElementById("error-firstname").innerHTML = 'please provide a valid firstname'
                return false;
            }

            if (!validateName("lname")) {
                document.getElementById("error-lastname").innerHTML = 'please provide a valid lastname'
                return false;
            }
            if (!/^\S+@\S+\.\S+$/.test(email)) {
                    console.log("inside if")
                    document.getElementById("email").focus()
                    document.getElementById("error-email").textContent = "Please enter a valid email address"
                    return false;
                }
                if (!/^\d{10}$/.test(phone)) {
                    document.getElementById("phone").focus()
                    document.getElementById("error-phone").textContent = "Please enter a valid phone number"
                    return false;
                }
            if (!validateName("city")) {
                document.getElementById("error-city").innerHTML = 'please provide a valid city'
                return false;
            }
            var passw_regex=  /^[A-Za-z]\w{7,14}$/;
            if(!passw_regex.test(password1))
            {
                document.getElementById("error-password1").innerHTML="Input Password and Submit [7 to 15 characters which contain only characters, numeric digits, underscore and first character must be a letter]"
                return false;
            }

            if(password1!==password2)
            {
                document.getElementById("error-password2").innerHTML = 'password mismatch'
                return false;
            }



            }
            const validateName = (inputname) => {
            let inputfield = document.forms["Form1"][inputname].value.trim();
            let nameregex = /^[a-zA-Z\s-]+$/;

         
            // console.log("function called")
            if (!nameregex.test(inputfield)  ) {

                return false;
            }
            return true;
        }
        </script>
    </div>
</body>
</html>